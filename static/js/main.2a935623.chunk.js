(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,n){e.exports=n(55)},44:function(e,t,n){},46:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(20),i=n.n(a),o=(n(44),n(11)),s=n(12),u=n(24),p=n(21),l=n(23),h=n(16),d=(n(46),n(25)),y=n(26),b=["i","j","l","o","s","t","z"];function f(){return b[Math.floor(Math.random()*b.length)]}function v(e,t){if(!t)return e;for(var n=e.map(function(e){return e.slice()}),r=t.getCells(),c=0;c<r.length;c+=1)for(var a=0;a<r[0].length;a+=1)n[t.y+c][t.x+a]=r[c][a]+e[t.y+c][t.x+a];return n}var g=10,j=20;function O(){var e=Object(d.a)(["\n  width: 25px;\n  height: 0;\n  animation: collapse 250ms;\n  padding: 0;\n"]);return O=function(){return e},e}function x(){var e=Object(d.a)(["\n  width: 25px;\n  height: 25px;\n  padding: 0;\n"]);return x=function(){return e},e}function m(){var e=Object(d.a)(["\n  border-collapse: collapse;\n"]);return m=function(){return e},e}for(var w=y.a.table(m()),k=y.a.td(x()),P=y.a.td(O()),E=function(e){function t(e){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).call(this,e))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.piece,n=e.content,r=e.scoringRows,a=v(n,t);return c.a.createElement("div",{style:{position:"relative",borderBottom:"1px solid grey",borderLeft:"1px solid grey"}},c.a.createElement(w,null,c.a.createElement("tbody",null,n.map(function(e){return c.a.createElement("tr",null,e.map(function(){return c.a.createElement(k,null,c.a.createElement("div",{style:{borderTop:"1px solid grey",borderRight:"1px solid grey",height:"100%"}}))}))}))),c.a.createElement(w,{style:{position:"absolute",bottom:0,zIndex:-1}},c.a.createElement("tbody",null,a.reverse().map(function(e,t){var n=j-1-t;return c.a.createElement("tr",null,e.map(function(e){return r.indexOf(n)>=0?c.a.createElement(P,{style:{backgroundColor:e||void 0,borderColor:"transparent"}}):c.a.createElement(k,{style:{backgroundColor:e||void 0,borderColor:"transparent"}})}))}))))}}]),t}(c.a.PureComponent),C=n(35),T=n(7),R=n(3),A=Object(R.createAction)("newGame"),D=Object(R.createAction)("setupGame",function(e){return function(t,n){return e({piece:t,nextPiece:n})}}),G=Object(R.createAction)("endGame"),X=Object(R.createAction)("movePiece",function(e){return function(t,n){return e({deltaX:t,deltaY:n})}}),Y=Object(R.createAction)("nextPiece",function(e){return function(t,n){return e({nextPiece:t,piece:n})}}),z=Object(R.createAction)("rotate"),B=Object(R.createAction)("land"),I=Object(R.createAction)("score"),L=Object(R.createAction)("collapse"),M=Object(R.createAction)("pause"),N=[],W=0;W<j;W+=1){for(var J=[],_=0;_<g;_+=1)J.push("");N.push(J)}for(var S=n(22),U=[],$=0;$<2;$+=1){for(var q=[],F=0;F<4;F+=1)q.push("");U.push(q)}var H={newGame:A,movePiece:X,rotate:z,pause:M},K=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).keyDown=Object(C.throttle)(n.keyDown.bind(Object(h.a)(Object(h.a)(n))),50),n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyDown)}},{key:"keyDown",value:function(e){37===e.keyCode?this.props.movePiece(-1,0):39===e.keyCode?this.props.movePiece(1,0):40===e.keyCode?this.props.movePiece(0,-1):38===e.keyCode&&this.props.rotate()}},{key:"render",value:function(){var e=this.props,t=e.content,n=e.piece,r=e.nextPiece,a=e.score,i=e.scoringRows;return c.a.createElement("div",{className:"App"},c.a.createElement(E,{piece:n,content:t,scoringRows:i}),c.a.createElement("div",{style:{padding:"20px",display:"flex",flexDirection:"column",alignItems:"center"}},c.a.createElement("div",{style:{margin:"25px"}},"Score: ",a),c.a.createElement("div",null,c.a.createElement("div",{style:{margin:"15px",textAlign:"center"}},"Next Piece:"),c.a.createElement(E,{piece:r,content:U,scoringRows:[]})),c.a.createElement("div",{style:{margin:"25px"}},c.a.createElement("button",{onClick:this.props.newGame},"New Game")),c.a.createElement("div",{style:{margin:"25px"}},c.a.createElement("button",{onClick:this.props.pause},this.props.paused?"Resume":"Pause"))))}}]),t}(r.Component),Q=Object(S.b)(function(e){return{content:e.content,piece:e.piece,nextPiece:e.nextPiece,score:e.score,paused:e.paused,scoringRows:e.scoringRows}},H)(K);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=n(17),Z=n(18),ee=n(10),te=n.n(ee),ne=n(4),re=function(){function e(t,n,r){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(o.a)(this,e),this.x=void 0,this.y=void 0,this.type=void 0,this.state=void 0,this.x=t,this.y=n,this.type=r,this.state=c}return Object(s.a)(e,[{key:"rotate",value:function(){var t=0;return 0===this.state?t=3:1===this.state?t=0:2===this.state?t=1:3===this.state&&(t=2),new e(this.x,this.y,this.type,t)}},{key:"move",value:function(t,n){return new e(this.x+t,this.y+n,this.type,this.state)}},{key:"getCells",value:function(){var e=this.getCells_(),t="";return"i"===this.type?t="#00bcd4":"j"===this.type?t="#2196f3":"l"===this.type?t="#ff9800":"o"===this.type?t="#ffeb3b":"s"===this.type?t="#4caf50":"t"===this.type?t="#9c27b0":"z"===this.type&&(t="#f44336"),e.map(function(e){return e.map(function(e){return e?t:""})})}},{key:"getCells_",value:function(){if("i"===this.type)return 1===this.state||3===this.state?[[!0],[!0],[!0],[!0]]:[[!0,!0,!0,!0]];if("j"===this.type)return 0===this.state?[[!0,!0,!0],[!1,!1,!0]]:1===this.state?[[!1,!0],[!1,!0],[!0,!0]]:2===this.state?[[!0,!1,!1],[!0,!0,!0]]:[[!0,!0],[!0,!1],[!0,!1]];if("l"===this.type)return 0===this.state?[[!0,!0,!0],[!0,!1,!1]]:1===this.state?[[!0,!0],[!1,!0],[!1,!0]]:2===this.state?[[!1,!1,!0],[!0,!0,!0]]:[[!0,!1],[!0,!1],[!0,!0]];if("o"===this.type)return[[!0,!0],[!0,!0]];if("s"===this.type){if(0===this.state||2===this.state)return[[!1,!0,!0],[!0,!0,!1]];if(1===this.state||3===this.state)return[[!0,!1],[!0,!0],[!1,!0]]}if("z"===this.type){if(0===this.state||2===this.state)return[[!0,!0,!1],[!1,!0,!0]];if(1===this.state||3===this.state)return[[!1,!0],[!0,!0],[!0,!1]]}return"t"===this.type?0===this.state?[[!0,!0,!0],[!1,!0,!1]]:1===this.state?[[!1,!0],[!0,!0],[!1,!0]]:2===this.state?[[!1,!0,!1],[!0,!0,!0]]:[[!0,!1],[!0,!0],[!0,!1]]:[[]]}}]),e}(),ce=te.a.mark(oe),ae=te.a.mark(se),ie=te.a.mark(ue);function oe(){var e,t,n,r,c;return te.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=f(),t="i"===e?new re(g/2-2,j-1,e):new re(g/2-1,j-2,e),n=f(),r=new re("i"===n?0:1,0,n),a.next=6,Object(ne.d)({type:Object(R.getType)(D),payload:{piece:t,nextPiece:r}});case 6:return a.next=8,Object(ne.c)(se);case 8:return c=a.sent,a.next=11,Object(ne.g)(Object(R.getType)(G));case 11:return a.next=13,Object(ne.b)(c);case 13:case"end":return a.stop()}},ce,this)}function se(){var e,t,n,r,c,a,i,o,s,u,p,l;return te.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=3,Object(ne.e)({delay:Object(ne.a)(Z.b,500),takePause:Object(ne.g)(Object(R.getType)(M))});case 3:if(e=h.sent,!e.takePause){h.next=8;break}return h.next=8,Object(ne.g)(Object(R.getType)(M));case 8:return h.next=10,Object(ne.f)(function(e){return{content:e.content,piece:e.piece,nextPiece:e.nextPiece}});case 10:for(t=h.sent,n=t.piece.getCells(),r=!1,c=0;c<n.length&&!r;c+=1)for(a=0;a<n[0].length&&!r;a+=1)t.piece.y-1+c<0?r=!0:n[c][a]&&t.content[t.piece.y-1+c][t.piece.x+a]&&(r=!0);if(!r){h.next=45;break}return i=f(),o=void 0,o=new re("i"===i?0:1,0,i),s=void 0,s="i"===t.nextPiece.type?new re(g/2-2,j-1,t.nextPiece.type):new re(g/2-1,j-2,t.nextPiece.type),h.next=22,Object(ne.d)({type:Object(R.getType)(B)});case 22:return h.next=24,Object(ne.d)({type:Object(R.getType)(I)});case 24:return h.next=26,Object(ne.f)(function(e){return e.scoringRows});case 26:if(!(h.sent.length>0)){h.next=32;break}return h.next=30,Object(ne.a)(Z.b,250);case 30:return h.next=32,Object(ne.d)({type:Object(R.getType)(L)});case 32:return h.next=34,Object(ne.d)({type:Object(R.getType)(Y),payload:{nextPiece:o,piece:s}});case 34:return h.next=36,Object(ne.f)(function(e){return{content:e.content,piece:e.piece,nextPiece:e.nextPiece}});case 36:for(t=h.sent,u=!1,n=t.piece.getCells(),p=0;p<n.length&&!u;p+=1)for(l=0;l<n[0].length&&!u;l+=1)t.content[t.piece.y+p][t.piece.x+l]&&(u=!0);if(!u){h.next=43;break}return h.next=43,Object(ne.d)({type:Object(R.getType)(G)});case 43:h.next=47;break;case 45:return h.next=47,Object(ne.d)({type:Object(R.getType)(X),payload:{deltaX:0,deltaY:-1}});case 47:h.next=0;break;case 49:case"end":return h.stop()}},ae,this)}function ue(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ne.h)(Object(R.getType)(A),oe);case 2:case"end":return e.stop()}},ie,this)}var pe=n(37),le=n.n(pe),he=Object(Z.a)(),de=Object(V.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{content:N,score:0,scoringRows:[],paused:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(R.getType)(D):return Object(T.a)({},e,{content:N,score:0,piece:t.payload.piece,nextPiece:t.payload.nextPiece});case Object(R.getType)(X):var n=e.piece;if(n){for(var r=n.getCells(),c=!0,a=0;a<r.length&&c;a+=1)for(var i=0;i<r[0].length&&c;i+=1)n.y+a+t.payload.deltaY<0||n.x+i+t.payload.deltaX<0||n.x+i+t.payload.deltaX>=g?c=!1:e.content[n.y+a+t.payload.deltaY][n.x+i+t.payload.deltaX]&&r[a][i]&&(c=!1);c&&(n=n.move(t.payload.deltaX,t.payload.deltaY))}return Object(T.a)({},e,{piece:n});case Object(R.getType)(B):var o=v(e.content,e.piece);return Object(T.a)({},e,{content:o});case Object(R.getType)(Y):return Object(T.a)({},e,{piece:t.payload.piece,nextPiece:t.payload.nextPiece});case Object(R.getType)(z):var s=e.piece;if(s){for(var u=s.rotate(),p=u.getCells(),l=!0,h=0;h<p.length&&l;h+=1)for(var d=0;d<p[0].length&&l;d+=1)u.y+h>=j||u.x+d<0||u.x+d>=g?l=!1:e.content[u.y+h][u.x+d]&&p[h][d]&&(l=!1);l&&(s=u)}return Object(T.a)({},e,{piece:s});case Object(R.getType)(I):for(var y=e.content,b=0,f=[],O=0;O<j;O+=1){for(var x=y[O],m=!0,w=0;w<x.length&&m;w+=1)x[w]||(m=!1);m&&(b+=1,f.push(O))}var k=e.score;return 1===b?k+=10:2===b?k+=20:3===b?k+=40:4===b&&(k+=80),Object(T.a)({},e,{score:k,scoringRows:f});case Object(R.getType)(L):for(var P=e.content,E=e.scoringRows,C=[],A=0;A<P.length;A+=1)E.indexOf(A)<0&&C.push(P[A]);for(var G=0;G<E.length;G+=1){for(var W=[],J=0;J<g;J+=1)W.push("");C.push(W)}return Object(T.a)({},e,{content:C,scoringRows:[]});case Object(R.getType)(M):return Object(T.a)({},e,{paused:!e.paused});default:return e}},Object(V.a)(he,le.a));he.run(ue),i.a.render(c.a.createElement(S.a,{store:de},c.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,2,1]]]);
//# sourceMappingURL=main.2a935623.chunk.js.map