(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,n){e.exports=n(55)},44:function(e,t,n){},46:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(19),i=n.n(a),o=(n(44),n(11)),s=n(12),u=n(24),p=n(20),l=n(23),h=n(16),d=(n(46),n(25)),y=n(26),f=["i","j","l","o","s","t","z"];function b(){return f[Math.floor(Math.random()*f.length)]}function v(e,t){if(!t)return e;for(var n=e.map(function(e){return e.slice()}),r=t.getCells(),c=0;c<r.length;c+=1)for(var a=0;a<r[0].length;a+=1)n[t.y+c][t.x+a]=r[c][a]||e[t.y+c][t.x+a];return n}function x(){var e=Object(d.a)(["\n  border: 1px solid grey;\n  width: 25px;\n  height: 25px;\n  padding: 0;\n"]);return x=function(){return e},e}function j(){var e=Object(d.a)(["\n  border-collapse: collapse;\n"]);return j=function(){return e},e}for(var O=y.a.table(j()),m=y.a.td(x()),g=function(e){function t(e){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).call(this,e))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.piece,n=v(e.content,t);return c.a.createElement(O,null,c.a.createElement("tbody",null,n.reverse().map(function(e){return c.a.createElement("tr",null,e.map(function(e){return c.a.createElement(m,null,e?c.a.createElement("div",{style:{backgroundColor:"pink",width:"100%",height:"100%"}}):null)}))})))}}]),t}(c.a.PureComponent),w=n(35),k=n(10),P=n(3),E=10,C=20,T=Object(P.createAction)("newGame"),A=Object(P.createAction)("setupGame",function(e){return function(t,n){return e({piece:t,nextPiece:n})}}),D=Object(P.createAction)("endGame"),G=Object(P.createAction)("movePiece",function(e){return function(t,n){return e({deltaX:t,deltaY:n})}}),X=Object(P.createAction)("nextPiece",function(e){return function(t,n){return e({nextPiece:t,piece:n})}}),Y=Object(P.createAction)("rotate"),M=Object(P.createAction)("land"),N=Object(P.createAction)("score"),W=[],z=0;z<C;z+=1){for(var B=[],I=0;I<E;I+=1)B.push(!1);W.push(B)}for(var J=n(21),L=[],S=0;S<2;S+=1){for(var U=[],$=0;$<4;$+=1)U.push(!1);L.push(U)}var q={newGame:T,movePiece:G,rotate:Y},F=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(p.a)(t).call(this,e))).keyDown=Object(w.throttle)(n.keyDown.bind(Object(h.a)(Object(h.a)(n))),100),n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keyDown)}},{key:"keyDown",value:function(e){37===e.keyCode?this.props.movePiece(-1,0):39===e.keyCode?this.props.movePiece(1,0):40===e.keyCode?this.props.movePiece(0,-1):38===e.keyCode&&this.props.rotate()}},{key:"render",value:function(){var e=this.props,t=e.content,n=e.piece,r=e.nextPiece,a=e.score;return c.a.createElement("div",{className:"App"},c.a.createElement(g,{piece:n,content:t}),c.a.createElement("div",{style:{padding:"20px",display:"flex",flexDirection:"column",alignItems:"center"}},c.a.createElement("div",{style:{margin:"25px"}},"Score: ",a),c.a.createElement("div",null,c.a.createElement("div",{style:{margin:"15px",textAlign:"center"}},"Next Piece:"),c.a.createElement(g,{piece:r,content:L})),c.a.createElement("div",{style:{margin:"25px"}},c.a.createElement("button",{onClick:this.props.newGame},"New Game"))))}}]),t}(r.Component),H=Object(J.b)(function(e){return{content:e.content,piece:e.piece,nextPiece:e.nextPiece,score:e.score}},q)(F);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=n(17),Q=n(22),R=n(9),V=n.n(R),Z=n(5),_=function(){function e(t,n,r){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(o.a)(this,e),this.x=void 0,this.y=void 0,this.type=void 0,this.state=void 0,this.x=t,this.y=n,this.type=r,this.state=c}return Object(s.a)(e,[{key:"rotate",value:function(){var t=0;return 0===this.state?t=3:1===this.state?t=0:2===this.state?t=1:3===this.state&&(t=2),new e(this.x,this.y,this.type,t)}},{key:"move",value:function(t,n){return new e(this.x+t,this.y+n,this.type,this.state)}},{key:"getCells",value:function(){if("i"===this.type)return 1===this.state||3===this.state?[[!0],[!0],[!0],[!0]]:[[!0,!0,!0,!0]];if("j"===this.type)return 0===this.state?[[!0,!0,!0],[!1,!1,!0]]:1===this.state?[[!1,!0],[!1,!0],[!0,!0]]:2===this.state?[[!0,!1,!1],[!0,!0,!0]]:[[!0,!0],[!0,!1],[!0,!1]];if("l"===this.type)return 0===this.state?[[!0,!0,!0],[!0,!1,!1]]:1===this.state?[[!0,!0],[!1,!0],[!1,!0]]:2===this.state?[[!1,!1,!0],[!0,!0,!0]]:[[!0,!1],[!0,!1],[!0,!0]];if("o"===this.type)return[[!0,!0],[!0,!0]];if("s"===this.type){if(0===this.state||2===this.state)return[[!1,!0,!0],[!0,!0,!1]];if(1===this.state||3===this.state)return[[!0,!1],[!0,!0],[!1,!0]]}if("z"===this.type){if(0===this.state||2===this.state)return[[!0,!0,!1],[!1,!0,!0]];if(1===this.state||3===this.state)return[[!1,!0],[!0,!0],[!0,!1]]}return"t"===this.type?0===this.state?[[!0,!0,!0],[!1,!0,!1]]:1===this.state?[[!1,!0],[!0,!0],[!1,!0]]:2===this.state?[[!1,!0,!1],[!0,!0,!0]]:[[!0,!1],[!0,!0],[!0,!1]]:[[]]}}]),e}(),ee=V.a.mark(re),te=V.a.mark(ce),ne=V.a.mark(ae);function re(){var e,t,n,r,c;return V.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=b(),t="i"===e?new _(E/2-2,C-1,e):new _(E/2-1,C-2,e),n=b(),r=new _("i"===n?0:1,0,n),a.next=6,Object(Z.d)({type:Object(P.getType)(A),payload:{piece:t,nextPiece:r}});case 6:return a.next=8,Object(Z.c)(ce);case 8:return c=a.sent,a.next=11,Object(Z.f)(Object(P.getType)(D));case 11:return a.next=13,Object(Z.b)(c);case 13:case"end":return a.stop()}},ee,this)}function ce(){var e,t,n,r,c,a,i,o,s,u,p;return V.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=3,Object(Z.a)(Q.b,500);case 3:return l.next=5,Object(Z.e)(function(e){return{content:e.content,piece:e.piece,nextPiece:e.nextPiece}});case 5:for(e=l.sent,t=e.piece.getCells(),n=!1,r=0;r<t.length&&!n;r+=1)for(c=0;c<t[0].length&&!n;c+=1)e.piece.y-1+r<0?n=!0:t[r][c]&&e.content[e.piece.y-1+r][e.piece.x+c]&&(n=!0);if(!n){l.next=32;break}return a=b(),i=void 0,i=new _("i"===a?0:1,0,a),o=void 0,o="i"===e.nextPiece.type?new _(E/2-2,C-1,e.nextPiece.type):new _(E/2-1,C-2,e.nextPiece.type),l.next=17,Object(Z.d)({type:Object(P.getType)(M)});case 17:return l.next=19,Object(Z.d)({type:Object(P.getType)(N)});case 19:return l.next=21,Object(Z.d)({type:Object(P.getType)(X),payload:{nextPiece:i,piece:o}});case 21:return l.next=23,Object(Z.e)(function(e){return{content:e.content,piece:e.piece,nextPiece:e.nextPiece}});case 23:for(e=l.sent,s=!1,t=e.piece.getCells(),u=0;u<t.length&&!s;u+=1)for(p=0;p<t[0].length&&!s;p+=1)e.content[e.piece.y+u][e.piece.x+p]&&(s=!0);if(!s){l.next=30;break}return l.next=30,Object(Z.d)({type:Object(P.getType)(D)});case 30:l.next=34;break;case 32:return l.next=34,Object(Z.d)({type:Object(P.getType)(G),payload:{deltaX:0,deltaY:-1}});case 34:l.next=0;break;case 36:case"end":return l.stop()}},te,this)}function ae(){return V.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.g)(Object(P.getType)(T),re);case 2:case"end":return e.stop()}},ne,this)}var ie=n(37),oe=n.n(ie),se=Object(Q.a)(),ue=Object(K.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{content:W,score:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(P.getType)(A):return Object(k.a)({},e,{content:W,score:0,piece:t.payload.piece,nextPiece:t.payload.nextPiece});case Object(P.getType)(G):var n=e.piece;if(n){for(var r=n.getCells(),c=!0,a=0;a<r.length&&c;a+=1)for(var i=0;i<r[0].length&&c;i+=1)n.y+a+t.payload.deltaY<0||n.x+i+t.payload.deltaX<0||n.x+i+t.payload.deltaX>=E?c=!1:e.content[n.y+a+t.payload.deltaY][n.x+i+t.payload.deltaX]&&r[a][i]&&(c=!1);c&&(n=n.move(t.payload.deltaX,t.payload.deltaY))}return Object(k.a)({},e,{piece:n});case Object(P.getType)(M):var o=v(e.content,e.piece);return Object(k.a)({},e,{content:o});case Object(P.getType)(X):return Object(k.a)({},e,{piece:t.payload.piece,nextPiece:t.payload.nextPiece});case Object(P.getType)(Y):var s=e.piece;if(s){for(var u=s.rotate(),p=u.getCells(),l=!0,h=0;h<p.length&&l;h+=1)for(var d=0;d<p[0].length&&l;d+=1)u.y+h>=C||u.x+d<0||u.x+d>=E?l=!1:e.content[u.y+h][u.x+d]&&p[h][d]&&(l=!1);l&&(s=u)}return Object(k.a)({},e,{piece:s});case Object(P.getType)(N):for(var y=e.content,f=0,b=[],x=0;x<C;x+=1){for(var j=y[x],O=!0,m=0;m<j.length&&O;m+=1)j[m]||(O=!1);O&&(f+=1,b.push(x))}var g=e.score;1===f?g+=10:2===f?g+=20:3===f?g+=40:4===f&&(g+=80);for(var w=[],T=0;T<y.length;T+=1)b.indexOf(T)<0&&w.push(y[T]);for(var D=0;D<b.length;D+=1){for(var z=[],B=0;B<E;B+=1)z.push(!1);w.push(z)}return Object(k.a)({},e,{score:g,content:w});default:return e}},Object(K.a)(se,oe.a));se.run(ae),i.a.render(c.a.createElement(J.a,{store:ue},c.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,2,1]]]);
//# sourceMappingURL=main.daf0e977.chunk.js.map