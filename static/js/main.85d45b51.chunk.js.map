{"version":3,"sources":["logic/index.tsx","reducer/index.tsx","components/Board.tsx","constants.tsx","App.tsx","serviceWorker.js","components/Piece.tsx","sagas.tsx","index.tsx"],"names":["pieceTypes","genPieceType","Math","floor","random","length","merge","content","piece","mergedContent","map","row","slice","pieceCells","getCells","i","j","y","x","Container","styled","table","_templateObject","Cell","td","_templateObject2","Board","props","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","_this$props","react_default","a","createElement","reverse","cell","style","backgroundColor","width","height","React","PureComponent","BOARD_WIDTH","BOARD_HEIGHT","newGame","createAction","setupGame","resolve","nextPiece","endGame","movePiece","deltaX","deltaY","nextPieceEnters","rotate","land","score","emptyContent","push","emptyContentSmall","mapDispatchToProps","App","_this","keyDown","throttle","bind","assertThisInitialized","document","addEventListener","removeEventListener","ev","keyCode","className","components_Board","padding","display","flexDirection","alignItems","margin","textAlign","onClick","Component","connect","state","Boolean","window","location","hostname","match","Piece","type","arguments","undefined","newState","cells","getCells_","color","val","newGameSaga","progressGameSaga","rootSaga","pieceType","nextPieceType","progressTask","regenerator_default","wrap","_context","prev","next","put","getType","payload","fork","sent","take","cancel","stop","_marked","data","landed","_nextPiece","_piece","collided","_i","_j","_context2","delay","select","_marked2","_context3","takeLatest","_marked3","sagaMiddleware","createSagaMiddleware","store","createStore","action","objectSpread","move","rotatedPiece","count","scoringRows","full","newContent","indexOf","applyMiddleware","logger","run","ReactDOM","render","es","src_App_0","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"mSAEMA,EAAa,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAE3C,SAASC,IAEd,OADkBD,EAAWE,KAAKC,MAAMD,KAAKE,SAAWJ,EAAWK,SAI9D,SAASC,EAAMC,EAAqBC,GACzC,IAAKA,EACH,OAAOD,EAMT,IAHA,IAAME,EAAgBF,EAAQG,IAAI,SAAAC,GAAG,OAAIA,EAAIC,UACvCC,EAAaL,EAAMM,WAEhBC,EAAI,EAAGA,EAAIF,EAAWR,OAAQU,GAAK,EAC1C,IAAK,IAAIC,EAAI,EAAGA,EAAIH,EAAW,GAAGR,OAAQW,GAAK,EAC7CP,EAAcD,EAAMS,EAAIF,GAAGP,EAAMU,EAAIF,GACnCH,EAAWE,GAAGC,GAAKT,EAAQC,EAAMS,EAAIF,GAAGP,EAAMU,EAAIF,GAIxD,OAAOP,yPCgBT,ICnCA,IAAMU,EAAYC,IAAOC,MAAVC,KAITC,EAAOH,IAAOI,GAAVC,KA8CKC,cAjCb,SAAAA,EAAYC,GAAoB,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAJ,GAAAE,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAF,GAAAO,KAAAH,KACxBH,0EAGC,IAAAO,EACoBJ,KAAKH,MAAxBnB,EADD0B,EACC1B,MAEFC,EAAgBH,EAHf4B,EACQ3B,QAEsBC,GAErC,OACE2B,EAAAC,EAAAC,cAAClB,EAAD,KACEgB,EAAAC,EAAAC,cAAA,aACG5B,EAAc6B,UAAU5B,IAAI,SAAAC,GAC3B,OACEwB,EAAAC,EAAAC,cAAA,UACG1B,EAAID,IAAI,SAAA6B,GACP,OACEJ,EAAAC,EAAAC,cAACd,EAAD,KACGgB,EACCJ,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAAEC,gBAAiBF,EAAMG,MAAO,OAAQC,OAAQ,UAC1D,oBArBNC,IAAMC,sCCrBbC,EAAc,GACdC,EAAe,GFIfC,EAAUC,uBAAa,WAEvBC,EAAYD,uBAAa,YAAa,SAAAE,GAAO,OAAI,SAAC3C,EAAc4C,GAAf,OAC5DD,EAAQ,CAAE3C,QAAO4C,iBAGNC,EAAUJ,uBAAa,WAEvBK,EAAYL,uBAAa,YAAa,SAAAE,GAAO,OAAI,SAACI,EAAgBC,GAAjB,OAC5DL,EAAQ,CAAEI,SAAQC,cAGPC,EAAkBR,uBAC7B,YACA,SAAAE,GAAO,OAAI,SAACC,EAAkB5C,GAAnB,OAAoC2C,EAAQ,CAAEC,YAAW5C,aAGzDkD,EAAST,uBAAa,UAEtBU,EAAOV,uBAAa,QAEpBW,EAAQX,uBAAa,SAa5BY,EAA2B,GACxB9C,EAAI,EAAGA,EAAIgC,EAAchC,GAAK,EAAG,CAExC,IADA,IAAMJ,EAAgB,GACbK,EAAI,EAAGA,EAAI8B,EAAa9B,GAAK,EACpCL,EAAImD,KAAK,IAGXD,EAAaC,KAAKnD,GGtCpB,IHyCe,YG1CToD,EAAgC,GAC7BhD,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAAG,CAE7B,IADA,IAAMJ,EAAgB,GACbK,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAC1BL,EAAImD,KAAK,IAGXC,EAAkBD,KAAKnD,GAYzB,IAAMqD,EAAqB,CAAEhB,UAASM,YAAWI,UAM3CO,cACJ,SAAAA,EAAYtC,GAAiB,IAAAuC,EAAA,OAAAtC,OAAAC,EAAA,EAAAD,CAAAE,KAAAmC,IAC3BC,EAAAtC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAqC,GAAAhC,KAAAH,KAAMH,KAEDwC,QAAUC,mBAASF,EAAKC,QAAQE,KAAbzC,OAAA0C,EAAA,EAAA1C,QAAA0C,EAAA,EAAA1C,CAAAsC,KAAyB,IAHtBA,mFAO3BK,SAASC,iBAAiB,UAAW1C,KAAKqC,wDAI1CI,SAASE,oBAAoB,UAAW3C,KAAKqC,yCAGvCO,GACa,KAAfA,EAAGC,QACL7C,KAAKH,MAAM2B,WAAW,EAAG,GACD,KAAfoB,EAAGC,QACZ7C,KAAKH,MAAM2B,UAAU,EAAG,GACA,KAAfoB,EAAGC,QACZ7C,KAAKH,MAAM2B,UAAU,GAAI,GACD,KAAfoB,EAAGC,SACZ7C,KAAKH,MAAM+B,0CAIN,IAAAxB,EACsCJ,KAAKH,MAA1CpB,EADD2B,EACC3B,QAASC,EADV0B,EACU1B,MAAO4C,EADjBlB,EACiBkB,UAAWQ,EAD5B1B,EAC4B0B,MACnC,OACEzB,EAAAC,EAAAC,cAAA,OAAKuC,UAAU,OACbzC,EAAAC,EAAAC,cAACwC,EAAD,CAAOrE,MAAOA,EAAOD,QAASA,IAC9B4B,EAAAC,EAAAC,cAAA,OACEG,MAAO,CACLsC,QAAS,OACTC,QAAS,OACTC,cAAe,SACfC,WAAY,WAGd9C,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAAE0C,OAAQ,SAAtB,UAAwCtB,GACxCzB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAAE0C,OAAQ,OAAQC,UAAW,WAAzC,eACAhD,EAAAC,EAAAC,cAACwC,EAAD,CAAOrE,MAAO4C,EAAW7C,QAASwD,KAEpC5B,EAAAC,EAAAC,cAAA,OAAKG,MAAO,CAAE0C,OAAQ,SACpB/C,EAAAC,EAAAC,cAAA,UAAQ+C,QAAStD,KAAKH,MAAMqB,SAA5B,sBA9CMqC,aAsDHC,cArEf,SAAyBC,GACvB,MAAO,CACLhF,QAASgF,EAAMhF,QACfC,MAAO+E,EAAM/E,MACb4C,UAAWmC,EAAMnC,UACjBQ,MAAO2B,EAAM3B,QAkEfI,EAFasB,CAGbrB,GC7EkBuB,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,sGCyGSC,aAlHb,SAAAA,EAAY3E,EAAWD,EAAW6E,GAA8B,IAAlBP,EAAkBQ,UAAA1F,OAAA,QAAA2F,IAAAD,UAAA,GAAAA,UAAA,GAAH,EAAGnE,OAAAC,EAAA,EAAAD,CAAAE,KAAA+D,GAAA/D,KALvDZ,OAKuD,EAAAY,KAJvDb,OAIuD,EAAAa,KAHvDgE,UAGuD,EAAAhE,KAFvDyD,WAEuD,EAC9DzD,KAAKZ,EAAIA,EACTY,KAAKb,EAAIA,EACTa,KAAKgE,KAAOA,EACZhE,KAAKyD,MAAQA,uDAIb,IAAIU,EAAkB,EAWtB,OAVmB,IAAfnE,KAAKyD,MACPU,EAAW,EACa,IAAfnE,KAAKyD,MACdU,EAAW,EACa,IAAfnE,KAAKyD,MACdU,EAAW,EACa,IAAfnE,KAAKyD,QACdU,EAAW,GAGN,IAAIJ,EAAM/D,KAAKZ,EAAGY,KAAKb,EAAGa,KAAKgE,KAAMG,gCAGlC1C,EAAgBC,GAC1B,OAAO,IAAIqC,EAAM/D,KAAKZ,EAAIqC,EAAQzB,KAAKb,EAAIuC,EAAQ1B,KAAKgE,KAAMhE,KAAKyD,0CAInE,IAAMW,EAAQpE,KAAKqE,YACfC,EAAQ,GAiBZ,MAhBkB,MAAdtE,KAAKgE,KACPM,EAAQ,UACe,MAAdtE,KAAKgE,KACdM,EAAQ,UACe,MAAdtE,KAAKgE,KACdM,EAAQ,UACe,MAAdtE,KAAKgE,KACdM,EAAQ,UACe,MAAdtE,KAAKgE,KACdM,EAAQ,UACe,MAAdtE,KAAKgE,KACdM,EAAQ,UACe,MAAdtE,KAAKgE,OACdM,EAAQ,WAGHF,EAAMxF,IAAI,SAAAC,GAAG,OAAIA,EAAID,IAAI,SAAA2F,GAAG,OAAKA,EAAMD,EAAQ,2CAItD,GAAkB,MAAdtE,KAAKgE,KACP,OAAmB,IAAfhE,KAAKyD,OAA8B,IAAfzD,KAAKyD,MACpB,CAAC,EAAC,GAAO,EAAC,GAAO,EAAC,GAAO,EAAC,IAE5B,CAAC,EAAC,GAAM,GAAM,GAAM,IAE7B,GAAkB,MAAdzD,KAAKgE,KACP,OAAmB,IAAfhE,KAAKyD,MACA,CAAC,EAAC,GAAM,GAAM,GAAO,EAAC,GAAO,GAAO,IAE1B,IAAfzD,KAAKyD,MACA,CAAC,EAAC,GAAO,GAAO,EAAC,GAAO,GAAO,EAAC,GAAM,IAE5B,IAAfzD,KAAKyD,MACA,CAAC,EAAC,GAAM,GAAO,GAAQ,EAAC,GAAM,GAAM,IAEtC,CAAC,EAAC,GAAM,GAAO,EAAC,GAAM,GAAQ,EAAC,GAAM,IAE9C,GAAkB,MAAdzD,KAAKgE,KACP,OAAmB,IAAfhE,KAAKyD,MACA,CAAC,EAAC,GAAM,GAAM,GAAO,EAAC,GAAM,GAAO,IAEzB,IAAfzD,KAAKyD,MACA,CAAC,EAAC,GAAM,GAAO,EAAC,GAAO,GAAO,EAAC,GAAO,IAE5B,IAAfzD,KAAKyD,MACA,CAAC,EAAC,GAAO,GAAO,GAAO,EAAC,GAAM,GAAM,IAEtC,CAAC,EAAC,GAAM,GAAQ,EAAC,GAAM,GAAQ,EAAC,GAAM,IAE/C,GAAkB,MAAdzD,KAAKgE,KACP,MAAO,CAAC,EAAC,GAAM,GAAO,EAAC,GAAM,IAE/B,GAAkB,MAAdhE,KAAKgE,KAAc,CACrB,GAAmB,IAAfhE,KAAKyD,OAA8B,IAAfzD,KAAKyD,MAC3B,MAAO,CAAC,EAAC,GAAO,GAAM,GAAO,EAAC,GAAM,GAAM,IAE5C,GAAmB,IAAfzD,KAAKyD,OAA8B,IAAfzD,KAAKyD,MAC3B,MAAO,CAAC,EAAC,GAAM,GAAQ,EAAC,GAAM,GAAO,EAAC,GAAO,IAGjD,GAAkB,MAAdzD,KAAKgE,KAAc,CACrB,GAAmB,IAAfhE,KAAKyD,OAA8B,IAAfzD,KAAKyD,MAC3B,MAAO,CAAC,EAAC,GAAM,GAAM,GAAQ,EAAC,GAAO,GAAM,IAE7C,GAAmB,IAAfzD,KAAKyD,OAA8B,IAAfzD,KAAKyD,MAC3B,MAAO,CAAC,EAAC,GAAO,GAAO,EAAC,GAAM,GAAO,EAAC,GAAM,IAGhD,MAAkB,MAAdzD,KAAKgE,KACY,IAAfhE,KAAKyD,MACA,CAAC,EAAC,GAAM,GAAM,GAAO,EAAC,GAAO,GAAM,IAEzB,IAAfzD,KAAKyD,MACA,CAAC,EAAC,GAAO,GAAO,EAAC,GAAM,GAAO,EAAC,GAAO,IAE5B,IAAfzD,KAAKyD,MACA,CAAC,EAAC,GAAO,GAAM,GAAQ,EAAC,GAAM,GAAM,IAEtC,CAAC,EAAC,GAAM,GAAQ,EAAC,GAAM,GAAO,EAAC,GAAM,IAEvC,CAAC,yBCtGFe,gBAyBAC,gBAkEeC,IA3FzB,SAAUF,KAAV,IAAAG,EAAAjG,EAAAkG,EAAAtD,EAAAuD,EAAA,OAAAC,EAAAxE,EAAAyE,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAiBE,OAhBMP,EAAYxG,IAGhBO,EADgB,MAAdiG,EACM,IAAIZ,EAAM/C,EAAc,EAAI,EAAGC,EAAe,EAAG0D,GAEjD,IAAIZ,EAAM/C,EAAc,EAAI,EAAGC,EAAe,EAAG0D,GAGrDC,EAAgBzG,IAGpBmD,EAAY,IAAIyC,EADI,MAAlBa,EACoB,EAEA,EAFG,EAAGA,GAZhCI,EAAAE,KAAA,EAiBQC,YAAI,CAAEnB,KAAMoB,kBAAQhE,GAAYiE,QAAS,CAAE3G,QAAO4C,eAjB1D,OAmBuB,OAnBvB0D,EAAAE,KAAA,EAmB6BI,YAAKb,IAnBlC,OAoBE,OADMI,EAnBRG,EAAAO,KAAAP,EAAAE,KAAA,GAoBQM,YAAKJ,kBAAQ7D,IApBrB,QAsBE,OAtBFyD,EAAAE,KAAA,GAsBQO,YAAOZ,GAtBf,yBAAAG,EAAAU,SAAAC,GAAA3F,MAyBA,SAAUyE,KAAV,IAAAmB,EAAA7G,EAAA8G,EAAA5G,EAAAC,EAAA0F,EAAAkB,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAApB,EAAAxE,EAAAyE,KAAA,SAAAoB,GAAA,cAAAA,EAAAlB,KAAAkB,EAAAjB,MAAA,OAEI,OAFJiB,EAAAjB,KAAA,EAEU/E,YAAKiG,IAAO,KAFtB,OAIyE,OAJzED,EAAAjB,KAAA,EAI+EmB,YACzE,SAAC5C,GACC,MAAO,CAAEhF,QAASgF,EAAMhF,QAASC,MAAO+E,EAAM/E,MAAO4C,UAAWmC,EAAMnC,aAN9E,OAYI,IARIsE,EAJRO,EAAAZ,KAUQxG,EAAa6G,EAAKlH,MAAMM,WACxB6G,GAAS,EACJ5G,EAAI,EAAGA,EAAIF,EAAWR,SAAWsH,EAAQ5G,GAAK,EACrD,IAASC,EAAI,EAAGA,EAAIH,EAAW,GAAGR,SAAWsH,EAAQ3G,GAAK,EACpD0G,EAAKlH,MAAMS,EAAI,EAAIF,EAAI,EACzB4G,GAAS,EACA9G,EAAWE,GAAGC,IAAM0G,EAAKnH,QAAQmH,EAAKlH,MAAMS,EAAI,EAAIF,GAAG2G,EAAKlH,MAAMU,EAAIF,KAC/E2G,GAAS,GAjBnB,IAsBQA,EAtBR,CAAAM,EAAAjB,KAAA,SAsCM,OAfMN,EAAgBzG,IAClBmD,OAxBV,EA0BQA,EAAY,IAAIyC,EADI,MAAlBa,EACoB,EAEA,EAFG,EAAGA,GAK1BlG,OA/BV,EAiCQA,EAD0B,MAAxBkH,EAAKtE,UAAU0C,KACT,IAAID,EAAM/C,EAAc,EAAI,EAAGC,EAAe,EAAG2E,EAAKtE,UAAU0C,MAEhE,IAAID,EAAM/C,EAAc,EAAI,EAAGC,EAAe,EAAG2E,EAAKtE,UAAU0C,MAnChFmC,EAAAjB,KAAA,GAsCYC,YAAI,CAAEnB,KAAMoB,kBAAQvD,KAtChC,QAwCM,OAxCNsE,EAAAjB,KAAA,GAwCYC,YAAI,CAAEnB,KAAMoB,kBAAQtD,KAxChC,QA0CM,OA1CNqE,EAAAjB,KAAA,GA0CYC,YAAI,CAAEnB,KAAMoB,kBAAQzD,GAAkB0D,QAAS,CAAE/D,YAAW5C,WA1CxE,QA6Ca,OA7CbyH,EAAAjB,KAAA,GA6CmBmB,YAAO,SAAC5C,GACnB,MAAO,CAAEhF,QAASgF,EAAMhF,QAASC,MAAO+E,EAAM/E,MAAO4C,UAAWmC,EAAMnC,aA9C9E,QAkDM,IALAsE,EA7CNO,EAAAZ,KAgDUS,GAAW,EACfjH,EAAa6G,EAAKlH,MAAMM,WACfC,EAAI,EAAGA,EAAIF,EAAWR,SAAWyH,EAAU/G,GAAK,EACvD,IAASC,EAAI,EAAGA,EAAIH,EAAW,GAAGR,SAAWyH,EAAU9G,GAAK,EACtD0G,EAAKnH,QAAQmH,EAAKlH,MAAMS,EAAIF,GAAG2G,EAAKlH,MAAMU,EAAIF,KAChD8G,GAAW,GArDvB,IAyDUA,EAzDV,CAAAG,EAAAjB,KAAA,SA0DQ,OA1DRiB,EAAAjB,KAAA,GA0DcC,YAAI,CAAEnB,KAAMoB,kBAAQ7D,KA1DlC,QAAA4E,EAAAjB,KAAA,iBA6DM,OA7DNiB,EAAAjB,KAAA,GA6DYC,YAAI,CAAEnB,KAAMoB,kBAAQ5D,GAAY6D,QAAS,CAAE5D,OAAQ,EAAGC,QAAS,KA7D3E,QAAAyE,EAAAjB,KAAA,iCAAAiB,EAAAT,SAAAY,GAAAtG,MAkEe,SAAU0E,KAAV,OAAAI,EAAAxE,EAAAyE,KAAA,SAAAwB,GAAA,cAAAA,EAAAtB,KAAAsB,EAAArB,MAAA,OACb,OADaqB,EAAArB,KAAA,EACPsB,YAAWpB,kBAAQlE,GAAUsD,IADtB,wBAAA+B,EAAAb,SAAAe,GAAAzG,8BChGT0G,GAAiBC,cACjBC,GAAQC,YPoCC,WAA6E,IAApEpD,EAAoEQ,UAAA1F,OAAA,QAAA2F,IAAAD,UAAA,GAAAA,UAAA,GAArD,CAAExF,QAASsD,EAAcD,MAAO,GAAKgF,EAAgB7C,UAAA1F,OAAA,EAAA0F,UAAA,QAAAC,EAC1F,OAAQ4C,EAAO9C,MACb,KAAKoB,kBAAQhE,GACX,OAAOtB,OAAAiH,EAAA,EAAAjH,CAAA,GACF2D,EADL,CAEEhF,QAASsD,EACTD,MAAO,EACPpD,MAAOoI,EAAOzB,QAAQ3G,MACtB4C,UAAWwF,EAAOzB,QAAQ/D,YAG9B,KAAK8D,kBAAQ5D,GACX,IAAI9C,EAAQ+E,EAAM/E,MAClB,GAAIA,EAAO,CAGT,IAFA,IAAM0F,EAAQ1F,EAAMM,WAChBgI,GAAO,EACF/H,EAAI,EAAGA,EAAImF,EAAM7F,QAAUyI,EAAM/H,GAAK,EAC7C,IAAK,IAAIC,EAAI,EAAGA,EAAIkF,EAAM,GAAG7F,QAAUyI,EAAM9H,GAAK,EAE9CR,EAAMS,EAAIF,EAAI6H,EAAOzB,QAAQ3D,OAAS,GACtChD,EAAMU,EAAIF,EAAI4H,EAAOzB,QAAQ5D,OAAS,GACtC/C,EAAMU,EAAIF,EAAI4H,EAAOzB,QAAQ5D,QAAUT,EAEvCgG,GAAO,EAEPvD,EAAMhF,QAAQC,EAAMS,EAAIF,EAAI6H,EAAOzB,QAAQ3D,QACxChD,EAAMU,EAAIF,EAAI4H,EAAOzB,QAAQ5D,SAChC2C,EAAMnF,GAAGC,KAET8H,GAAO,GAKTA,IACFtI,EAAQA,EAAMsI,KAAKF,EAAOzB,QAAQ5D,OAAQqF,EAAOzB,QAAQ3D,SAI7D,OAAO5B,OAAAiH,EAAA,EAAAjH,CAAA,GACF2D,EADL,CAEE/E,UAGJ,KAAK0G,kBAAQvD,GACX,IAAMpD,EAAUD,EAAMiF,EAAMhF,QAASgF,EAAM/E,OAC3C,OAAOoB,OAAAiH,EAAA,EAAAjH,CAAA,GAAK2D,EAAZ,CAAmBhF,YAErB,KAAK2G,kBAAQzD,GACX,OAAO7B,OAAAiH,EAAA,EAAAjH,CAAA,GACF2D,EADL,CAEE/E,MAAOoI,EAAOzB,QAAQ3G,MACtB4C,UAAWwF,EAAOzB,QAAQ/D,YAG9B,KAAK8D,kBAAQxD,GACX,IAAIlD,EAAQ+E,EAAM/E,MAClB,GAAIA,EAAO,CAIT,IAHA,IAAMuI,EAAevI,EAAMkD,SACrBwC,EAAQ6C,EAAajI,WACvB4C,GAAS,EACJ3C,EAAI,EAAGA,EAAImF,EAAM7F,QAAUqD,EAAQ3C,GAAK,EAC/C,IAAK,IAAIC,EAAI,EAAGA,EAAIkF,EAAM,GAAG7F,QAAUqD,EAAQ1C,GAAK,EAEhD+H,EAAa9H,EAAIF,GAAKgC,GACtBgG,EAAa7H,EAAIF,EAAI,GACrB+H,EAAa7H,EAAIF,GAAK8B,EAEtBY,GAAS,EACA6B,EAAMhF,QAAQwI,EAAa9H,EAAIF,GAAGgI,EAAa7H,EAAIF,IAAMkF,EAAMnF,GAAGC,KAC3E0C,GAAS,GAKXA,IACFlD,EAAQuI,GAIZ,OAAOnH,OAAAiH,EAAA,EAAAjH,CAAA,GACF2D,EADL,CAEE/E,UAGJ,KAAK0G,kBAAQtD,GAIX,IAHA,IAAMrD,EAAUgF,EAAMhF,QAClByI,EAAQ,EACNC,EAAc,GACXlI,EAAI,EAAGA,EAAIgC,EAAchC,GAAK,EAAG,CAGxC,IAFA,IAAMJ,EAAMJ,EAAQQ,GAChBmI,GAAO,EACFlI,EAAI,EAAGA,EAAIL,EAAIN,QAAU6I,EAAMlI,GAAK,EACtCL,EAAIK,KACPkI,GAAO,GAIPA,IACFF,GAAS,EACTC,EAAYnF,KAAK/C,IAIrB,IAAI6C,EAAQ2B,EAAM3B,MACJ,IAAVoF,EACFpF,GAAS,GACU,IAAVoF,EACTpF,GAAS,GACU,IAAVoF,EACTpF,GAAS,GACU,IAAVoF,IACTpF,GAAS,IAIX,IADA,IAAMuF,EAAa,GACVpI,EAAI,EAAGA,EAAIR,EAAQF,OAAQU,GAAK,EACnCkI,EAAYG,QAAQrI,GAAK,GAC3BoI,EAAWrF,KAAKvD,EAAQQ,IAG5B,IAAK,IAAIA,EAAI,EAAGA,EAAIkI,EAAY5I,OAAQU,GAAK,EAAG,CAE9C,IADA,IAAMJ,EAAM,GACHK,EAAI,EAAGA,EAAI8B,EAAa9B,GAAK,EACpCL,EAAImD,KAAK,IAEXqF,EAAWrF,KAAKnD,GAGlB,OAAOiB,OAAAiH,EAAA,EAAAjH,CAAA,GACF2D,EADL,CAEE3B,QACArD,QAAS4I,IAGb,QACE,OAAO5D,IO5KsB8D,YAAgBb,GAAgBc,OAEnEd,GAAee,IAAI/C,IAEnBgD,IAASC,OACPtH,EAAAC,EAAAC,cAACqH,EAAA,EAAD,CAAUhB,MAAOA,IACfvG,EAAAC,EAAAC,cAACsH,EAAD,OAEFpF,SAASqF,eAAe,SH4GpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC","file":"static/js/main.85d45b51.chunk.js","sourcesContent":["import Piece, { Type as PieceTypes } from '../components/Piece';\n\nconst pieceTypes = ['i', 'j', 'l', 'o', 's', 't', 'z'];\n\nexport function genPieceType(): PieceTypes {\n  const pieceType = pieceTypes[Math.floor(Math.random() * pieceTypes.length)];\n  return pieceType as PieceTypes;\n}\n\nexport function merge(content: string[][], piece?: Piece) {\n  if (!piece) {\n    return content;\n  }\n\n  const mergedContent = content.map(row => row.slice());\n  const pieceCells = piece.getCells();\n\n  for (let i = 0; i < pieceCells.length; i += 1) {\n    for (let j = 0; j < pieceCells[0].length; j += 1) {\n      mergedContent[piece.y + i][piece.x + j] =\n        pieceCells[i][j] + content[piece.y + i][piece.x + j];\n    }\n  }\n\n  return mergedContent;\n}\n","import { ActionType, createAction, getType } from 'typesafe-actions';\r\nimport Piece from '../components/Piece';\r\nimport { BOARD_HEIGHT, BOARD_WIDTH } from '../constants';\r\nimport { merge } from '../logic';\r\n\r\nexport const newGame = createAction('newGame');\r\n\r\nexport const setupGame = createAction('setupGame', resolve => (piece: Piece, nextPiece: Piece) =>\r\n  resolve({ piece, nextPiece }),\r\n);\r\n\r\nexport const endGame = createAction('endGame');\r\n\r\nexport const movePiece = createAction('movePiece', resolve => (deltaX: number, deltaY: number) =>\r\n  resolve({ deltaX, deltaY }),\r\n);\r\n\r\nexport const nextPieceEnters = createAction(\r\n  'nextPiece',\r\n  resolve => (nextPiece: Piece, piece: Piece) => resolve({ nextPiece, piece }),\r\n);\r\n\r\nexport const rotate = createAction('rotate');\r\n\r\nexport const land = createAction('land');\r\n\r\nexport const score = createAction('score');\r\n\r\nexport interface State {\r\n  content: string[][];\r\n  piece?: Piece;\r\n  nextPiece?: Piece;\r\n  score: number;\r\n}\r\n\r\nconst actions = { newGame, setupGame, movePiece, land, nextPieceEnters, rotate, score };\r\n\r\ntype Action = ActionType<typeof actions>;\r\n\r\nconst emptyContent: string[][] = [];\r\nfor (let i = 0; i < BOARD_HEIGHT; i += 1) {\r\n  const row: string[] = [];\r\n  for (let j = 0; j < BOARD_WIDTH; j += 1) {\r\n    row.push('');\r\n  }\r\n\r\n  emptyContent.push(row);\r\n}\r\n\r\nexport default function(state: State = { content: emptyContent, score: 0 }, action: Action) {\r\n  switch (action.type) {\r\n    case getType(setupGame): {\r\n      return {\r\n        ...state,\r\n        content: emptyContent,\r\n        score: 0,\r\n        piece: action.payload.piece,\r\n        nextPiece: action.payload.nextPiece,\r\n      };\r\n    }\r\n    case getType(movePiece): {\r\n      let piece = state.piece;\r\n      if (piece) {\r\n        const cells = piece.getCells();\r\n        let move = true;\r\n        for (let i = 0; i < cells.length && move; i += 1) {\r\n          for (let j = 0; j < cells[0].length && move; j += 1) {\r\n            if (\r\n              piece.y + i + action.payload.deltaY < 0 ||\r\n              piece.x + j + action.payload.deltaX < 0 ||\r\n              piece.x + j + action.payload.deltaX >= BOARD_WIDTH\r\n            ) {\r\n              move = false;\r\n            } else if (\r\n              state.content[piece.y + i + action.payload.deltaY]\r\n                [piece.x + j + action.payload.deltaX] &&\r\n              cells[i][j]\r\n            ) {\r\n              move = false;\r\n            }\r\n          }\r\n        }\r\n\r\n        if (move) {\r\n          piece = piece.move(action.payload.deltaX, action.payload.deltaY);\r\n        }\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        piece,\r\n      };\r\n    }\r\n    case getType(land): {\r\n      const content = merge(state.content, state.piece);\r\n      return { ...state, content };\r\n    }\r\n    case getType(nextPieceEnters): {\r\n      return {\r\n        ...state,\r\n        piece: action.payload.piece,\r\n        nextPiece: action.payload.nextPiece,\r\n      };\r\n    }\r\n    case getType(rotate): {\r\n      let piece = state.piece;\r\n      if (piece) {\r\n        const rotatedPiece = piece.rotate();\r\n        const cells = rotatedPiece.getCells();\r\n        let rotate = true;\r\n        for (let i = 0; i < cells.length && rotate; i += 1) {\r\n          for (let j = 0; j < cells[0].length && rotate; j += 1) {\r\n            if (\r\n              rotatedPiece.y + i >= BOARD_HEIGHT ||\r\n              rotatedPiece.x + j < 0 ||\r\n              rotatedPiece.x + j >= BOARD_WIDTH\r\n            ) {\r\n              rotate = false;\r\n            } else if (state.content[rotatedPiece.y + i][rotatedPiece.x + j] && cells[i][j]) {\r\n              rotate = false;\r\n            }\r\n          }\r\n        }\r\n\r\n        if (rotate) {\r\n          piece = rotatedPiece;\r\n        }\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        piece,\r\n      };\r\n    }\r\n    case getType(score): {\r\n      const content = state.content;\r\n      let count = 0;\r\n      const scoringRows = [];\r\n      for (let i = 0; i < BOARD_HEIGHT; i += 1) {\r\n        const row = content[i];\r\n        let full = true;\r\n        for (let j = 0; j < row.length && full; j += 1) {\r\n          if (!row[j]) {\r\n            full = false;\r\n          }\r\n        }\r\n\r\n        if (full) {\r\n          count += 1;\r\n          scoringRows.push(i);\r\n        }\r\n      }\r\n\r\n      let score = state.score;\r\n      if (count === 1) {\r\n        score += 10;\r\n      } else if (count === 2) {\r\n        score += 20;\r\n      } else if (count === 3) {\r\n        score += 40;\r\n      } else if (count === 4) {\r\n        score += 80;\r\n      }\r\n\r\n      const newContent = [] as string[][];\r\n      for (let i = 0; i < content.length; i += 1) {\r\n        if (scoringRows.indexOf(i) < 0) {\r\n          newContent.push(content[i]);\r\n        }\r\n      }\r\n      for (let i = 0; i < scoringRows.length; i += 1) {\r\n        const row = [] as string[];\r\n        for (let j = 0; j < BOARD_WIDTH; j += 1) {\r\n          row.push('');\r\n        }\r\n        newContent.push(row);\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        score,\r\n        content: newContent,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport Piece from './Piece';\r\nimport { merge } from '../logic';\r\n\r\nconst Container = styled.table`\r\n  border-collapse: collapse;\r\n`;\r\n\r\nconst Cell = styled.td`\r\n  border: 1px solid grey;\r\n  width: 25px;\r\n  height: 25px;\r\n  padding: 0;\r\n`;\r\n\r\ninterface BoardProps {\r\n  piece?: Piece;\r\n  content: string[][];\r\n}\r\n\r\nclass Board extends React.PureComponent<BoardProps, {}> {\r\n  constructor(props: BoardProps) {\r\n    super(props);\r\n  }\r\n\r\n  render() {\r\n    const { piece, content } = this.props;\r\n\r\n    const mergedContent = merge(content, piece);\r\n\r\n    return (\r\n      <Container>\r\n        <tbody>\r\n          {mergedContent.reverse().map(row => {\r\n            return (\r\n              <tr>\r\n                {row.map(cell => {\r\n                  return (\r\n                    <Cell>\r\n                      {cell ? (\r\n                        <div style={{ backgroundColor: cell, width: '100%', height: '100%' }} />\r\n                      ) : null}\r\n                    </Cell>\r\n                  );\r\n                })}\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Board;\r\n","export const BOARD_WIDTH = 10;\r\nexport const BOARD_HEIGHT = 20;\r\n","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport Board from './components/Board';\r\nimport { throttle } from 'lodash';\r\nimport { newGame, State, movePiece, rotate } from './reducer';\r\nimport { connect } from 'react-redux';\r\n\r\nconst emptyContentSmall: string[][] = [];\r\nfor (let i = 0; i < 2; i += 1) {\r\n  const row: string[] = [];\r\n  for (let j = 0; j < 4; j += 1) {\r\n    row.push('');\r\n  }\r\n\r\n  emptyContentSmall.push(row);\r\n}\r\n\r\nfunction mapStateToProps(state: State) {\r\n  return {\r\n    content: state.content,\r\n    piece: state.piece,\r\n    nextPiece: state.nextPiece,\r\n    score: state.score,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = { newGame, movePiece, rotate };\r\n\r\ntype DispatchProps = typeof mapDispatchToProps;\r\n\r\ninterface AppProps extends ReturnType<typeof mapStateToProps>, DispatchProps {}\r\n\r\nclass App extends Component<AppProps, {}> {\r\n  constructor(props: AppProps) {\r\n    super(props);\r\n\r\n    this.keyDown = throttle(this.keyDown.bind(this), 50);\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('keydown', this.keyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('keydown', this.keyDown);\r\n  }\r\n\r\n  keyDown(ev: KeyboardEvent) {\r\n    if (ev.keyCode === 37) {\r\n      this.props.movePiece(-1, 0);\r\n    } else if (ev.keyCode === 39) {\r\n      this.props.movePiece(1, 0);\r\n    } else if (ev.keyCode === 40) {\r\n      this.props.movePiece(0, -1);\r\n    } else if (ev.keyCode === 38) {\r\n      this.props.rotate();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { content, piece, nextPiece, score } = this.props;\r\n    return (\r\n      <div className=\"App\">\r\n        <Board piece={piece} content={content} />\r\n        <div\r\n          style={{\r\n            padding: '20px',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n          }}\r\n        >\r\n          <div style={{ margin: '25px' }}>Score: {score}</div>\r\n          <div>\r\n            <div style={{ margin: '15px', textAlign: 'center' }}>Next Piece:</div>\r\n            <Board piece={nextPiece} content={emptyContentSmall} />\r\n          </div>\r\n          <div style={{ margin: '25px' }}>\r\n            <button onClick={this.props.newGame}>New Game</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(App);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export type Type = 'i' | 'j' | 'l' | 'o' | 's' | 't' | 'z';\ntype State = 0 | 1 | 2 | 3;\n\nclass Piece {\n  readonly x: number;\n  readonly y: number;\n  readonly type: Type;\n  readonly state: State;\n\n  constructor(x: number, y: number, type: Type, state: State = 0) {\n    this.x = x;\n    this.y = y;\n    this.type = type;\n    this.state = state;\n  }\n\n  public rotate() {\n    let newState: State = 0;\n    if (this.state === 0) {\n      newState = 3;\n    } else if (this.state === 1) {\n      newState = 0;\n    } else if (this.state === 2) {\n      newState = 1;\n    } else if (this.state === 3) {\n      newState = 2;\n    }\n\n    return new Piece(this.x, this.y, this.type, newState);\n  }\n\n  public move(deltaX: number, deltaY: number) {\n    return new Piece(this.x + deltaX, this.y + deltaY, this.type, this.state);\n  }\n\n  public getCells(): string[][] {\n    const cells = this.getCells_();\n    let color = '';\n    if (this.type === 'i') {\n      color = '#00bcd4';\n    } else if (this.type === 'j') {\n      color = '#2196f3';\n    } else if (this.type === 'l') {\n      color = '#ff9800';\n    } else if (this.type === 'o') {\n      color = '#ffeb3b';\n    } else if (this.type === 's') {\n      color = '#4caf50';\n    } else if (this.type === 't') {\n      color = '#9c27b0';\n    } else if (this.type === 'z') {\n      color = '#f44336';\n    }\n\n    return cells.map(row => row.map(val => (val ? color : '')));\n  }\n\n  getCells_(): boolean[][] {\n    if (this.type === 'i') {\n      if (this.state === 1 || this.state === 3) {\n        return [[true], [true], [true], [true]];\n      }\n      return [[true, true, true, true]];\n    }\n    if (this.type === 'j') {\n      if (this.state === 0) {\n        return [[true, true, true], [false, false, true]];\n      }\n      if (this.state === 1) {\n        return [[false, true], [false, true], [true, true]];\n      }\n      if (this.state === 2) {\n        return [[true, false, false], [true, true, true]];\n      }\n      return [[true, true], [true, false], [true, false]];\n    }\n    if (this.type === 'l') {\n      if (this.state === 0) {\n        return [[true, true, true], [true, false, false]];\n      }\n      if (this.state === 1) {\n        return [[true, true], [false, true], [false, true]];\n      }\n      if (this.state === 2) {\n        return [[false, false, true], [true, true, true]];\n      }\n      return [[true, false], [true, false], [true, true]];\n    }\n    if (this.type === 'o') {\n      return [[true, true], [true, true]];\n    }\n    if (this.type === 's') {\n      if (this.state === 0 || this.state === 2) {\n        return [[false, true, true], [true, true, false]];\n      }\n      if (this.state === 1 || this.state === 3) {\n        return [[true, false], [true, true], [false, true]];\n      }\n    }\n    if (this.type === 'z') {\n      if (this.state === 0 || this.state === 2) {\n        return [[true, true, false], [false, true, true]];\n      }\n      if (this.state === 1 || this.state === 3) {\n        return [[false, true], [true, true], [true, false]];\n      }\n    }\n    if (this.type === 't') {\n      if (this.state === 0) {\n        return [[true, true, true], [false, true, false]];\n      }\n      if (this.state === 1) {\n        return [[false, true], [true, true], [false, true]];\n      }\n      if (this.state === 2) {\n        return [[false, true, false], [true, true, true]];\n      }\n      return [[true, false], [true, true], [true, false]];\n    }\n    return [[]];\n  }\n}\n\nexport default Piece;\n","import { SagaIterator, delay } from 'redux-saga';\r\nimport { takeLatest, put, fork, take, cancel, call, select } from 'redux-saga/effects';\r\nimport { getType } from 'typesafe-actions';\r\nimport {\r\n  newGame,\r\n  setupGame,\r\n  endGame,\r\n  movePiece,\r\n  State,\r\n  nextPieceEnters,\r\n  land,\r\n  score,\r\n} from './reducer';\r\nimport { genPieceType } from './logic';\r\nimport Piece from './components/Piece';\r\nimport { BOARD_WIDTH, BOARD_HEIGHT } from './constants';\r\n\r\nfunction* newGameSaga(): SagaIterator {\r\n  const pieceType = genPieceType();\r\n  let piece: Piece;\r\n  if (pieceType === 'i') {\r\n    piece = new Piece(BOARD_WIDTH / 2 - 2, BOARD_HEIGHT - 1, pieceType);\r\n  } else {\r\n    piece = new Piece(BOARD_WIDTH / 2 - 1, BOARD_HEIGHT - 2, pieceType);\r\n  }\r\n\r\n  const nextPieceType = genPieceType();\r\n  let nextPiece: Piece;\r\n  if (nextPieceType === 'i') {\r\n    nextPiece = new Piece(0, 0, nextPieceType);\r\n  } else {\r\n    nextPiece = new Piece(1, 0, nextPieceType);\r\n  }\r\n\r\n  yield put({ type: getType(setupGame), payload: { piece, nextPiece } });\r\n\r\n  const progressTask = yield fork(progressGameSaga);\r\n  yield take(getType(endGame));\r\n\r\n  yield cancel(progressTask);\r\n}\r\n\r\nfunction* progressGameSaga(): SagaIterator {\r\n  while (true) {\r\n    yield call(delay, 500);\r\n\r\n    let data: { content: boolean[][]; piece: Piece; nextPiece: Piece } = yield select(\r\n      (state: State) => {\r\n        return { content: state.content, piece: state.piece, nextPiece: state.nextPiece };\r\n      },\r\n    );\r\n\r\n    let pieceCells = data.piece.getCells();\r\n    let landed = false;\r\n    for (let i = 0; i < pieceCells.length && !landed; i += 1) {\r\n      for (let j = 0; j < pieceCells[0].length && !landed; j += 1) {\r\n        if (data.piece.y - 1 + i < 0) {\r\n          landed = true;\r\n        } else if (pieceCells[i][j] && data.content[data.piece.y - 1 + i][data.piece.x + j]) {\r\n          landed = true;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (landed) {\r\n      const nextPieceType = genPieceType();\r\n      let nextPiece: Piece;\r\n      if (nextPieceType === 'i') {\r\n        nextPiece = new Piece(0, 0, nextPieceType);\r\n      } else {\r\n        nextPiece = new Piece(1, 0, nextPieceType);\r\n      }\r\n\r\n      let piece: Piece;\r\n      if (data.nextPiece.type === 'i') {\r\n        piece = new Piece(BOARD_WIDTH / 2 - 2, BOARD_HEIGHT - 1, data.nextPiece.type);\r\n      } else {\r\n        piece = new Piece(BOARD_WIDTH / 2 - 1, BOARD_HEIGHT - 2, data.nextPiece.type);\r\n      }\r\n\r\n      yield put({ type: getType(land) });\r\n\r\n      yield put({ type: getType(score) });\r\n\r\n      yield put({ type: getType(nextPieceEnters), payload: { nextPiece, piece } });\r\n\r\n      // check if new piece collides with current cells\r\n      data = yield select((state: State) => {\r\n        return { content: state.content, piece: state.piece, nextPiece: state.nextPiece };\r\n      });\r\n      let collided = false;\r\n      pieceCells = data.piece.getCells();\r\n      for (let i = 0; i < pieceCells.length && !collided; i += 1) {\r\n        for (let j = 0; j < pieceCells[0].length && !collided; j += 1) {\r\n          if (data.content[data.piece.y + i][data.piece.x + j]) {\r\n            collided = true;\r\n          }\r\n        }\r\n      }\r\n      if (collided) {\r\n        yield put({ type: getType(endGame) });\r\n      }\r\n    } else {\r\n      yield put({ type: getType(movePiece), payload: { deltaX: 0, deltaY: -1 } });\r\n    }\r\n  }\r\n}\r\n\r\nexport default function* rootSaga(): SagaIterator {\r\n  yield takeLatest(getType(newGame), newGameSaga);\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux';\nimport reducer from './reducer';\nimport { createStore, applyMiddleware } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport rootSaga from './sagas';\nimport logger from 'redux-logger';\n\nconst sagaMiddleware = createSagaMiddleware();\nconst store = createStore(reducer, applyMiddleware(sagaMiddleware, logger));\n\nsagaMiddleware.run(rootSaga);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}